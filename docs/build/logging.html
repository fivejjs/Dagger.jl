<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Logging and Graphing · Dagger.jl</title><link rel="canonical" href="https://JuliaParallel.github.io/Dagger.jl/logging.html"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Dagger.jl</span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><a class="tocitem" href="processors.html">Processors</a></li><li><a class="tocitem" href="scheduler-internals.html">Scheduler Internals</a></li><li class="is-active"><a class="tocitem" href="logging.html">Logging and Graphing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="logging.html">Logging and Graphing</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="logging.html">Logging and Graphing</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaParallel/Dagger.jl/blob/master/docs/src/logging.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Logging-and-Graphing"><a class="docs-heading-anchor" href="#Logging-and-Graphing">Logging and Graphing</a><a id="Logging-and-Graphing-1"></a><a class="docs-heading-anchor-permalink" href="#Logging-and-Graphing" title="Permalink"></a></h1><p>Dagger&#39;s scheduler keeps track of the important and potentially expensive actions it does, such as moving data between workers or executing thunks, and tracks how much time and memory allocations these operations consume. Saving this information somewhere accessible is disabled by default, but it&#39;s quite easy to turn it on:</p><pre><code class="language-julia">ctx = Context()
log = Dagger.LocalEventLog()
ctx.log_sink = log</code></pre><p>Now anytime <code>ctx</code> is used as the context for a scheduler, the scheduler will log events into <code>log</code>. A <code>LocalEventLog</code> logs information in-memory, and does so on each worker. The default log object is a <code>NoOpLog</code>, which doesn&#39;t store events at all. The <code>FilterLog</code> exists to allow writing events to a user-defined location (such as a database, file, or network socket).</p><p>Once sufficient data has been accumulated into a <code>LocalEventLog</code>, it can be gathered to a single host via <code>Dagger.get_logs!(log)</code>. The result is a <code>Vector</code> of <code>Dagger.Timespan</code> objects, which describe some metadata about an operation that occured and the scheduler logged. These events may be introspected directly, or may also be rendered to a DOT-format string:</p><pre><code class="language-julia">logs = Dagger.get_logs!(log)
str = Dagger.show_plan(logs)</code></pre><p><code>Dagger.show_plan</code> can also be called as <code>Dagger.show_plan(io::IO, logs)</code> to write the graph to a file or other <code>IO</code> object. The string generated by this function may be passed to an external tool like <code>Graphviz</code> for rendering. Note that this method doesn&#39;t display input arguments to the DAG (non-<code>Thunk</code>s); you can call <code>Dagger.show_plan(logs, thunk)</code>, where <code>thunk</code> is the output <code>Thunk</code> of the DAG, to render argument nodes.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p><code>Dagger.get_logs!</code> clears out the event logs, so that old events don&#39;t mix with new ones from future DAGs.</p></div></div><p>As a convenience, it&#39;s possible to set <code>ctx.log_file</code> to the path to an output file, and then calls to <code>compute(ctx, ...)</code>/<code>collect(ctx, ...)</code> will automatically write the graph in DOT format to that path. There is also a benefit to this approach over manual calls to <code>get_logs!</code> and <code>show_plan</code>: DAGs which aren&#39;t <code>Thunk</code>s (such as operations on the <code>Dagger.DArray</code>) will be properly rendered with input arguments (which normally aren&#39;t rendered because a <code>Thunk</code> is dynamically generated from such operations by Dagger before scheduling).</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="scheduler-internals.html">« Scheduler Internals</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 20 November 2020 16:40">Friday 20 November 2020</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
